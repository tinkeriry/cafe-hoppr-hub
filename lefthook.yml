pre-commit:
  parallel: true
  commands:
    format:
      run: npm run format
      stage_fixed: true
    lint:
      run: |
        if ! npm run lint; then
          echo ""
          echo "‚ùå Linting errors detected!"
          echo ""
          echo "üí° To fix linting errors, try running:"
          echo "   npm run lint"
          echo ""
          echo "   Or to automatically fix some issues:"
          echo "   npm run lint:fix"
          echo ""
          exit 1
        fi

commit-msg:
  commands:
    commitlint:
      run: |
        commit_msg=$(cat {1})
        # Remove any leading/trailing whitespace and get first line
        commit_msg=$(echo "$commit_msg" | head -1 | xargs)
        if ! echo "$commit_msg" | grep -qE '^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,}'; then
          echo "‚ùå Invalid commit message format!"
          echo ""
          echo "Commit message must follow semantic commit format:"
          echo "  <type>(<scope>): <subject>"
          echo ""
          echo "Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
          echo ""
          echo "Examples:"
          echo "  feat: add new cafe modal"
          echo "  fix(cafe-card): resolve image loading issue"
          echo "  docs: update README with setup instructions"
          echo ""
          echo "Your message: '$commit_msg'"
          exit 1
        fi
      stage_fixed: false
